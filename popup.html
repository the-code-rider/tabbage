<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>tabbage</title>
  <style>
    :root {
      color-scheme: dark;
    }

    body {
      margin: 0;
      padding: 8px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
      min-width: 360px;
      max-width: 440px;
      box-sizing: border-box;
    }

    h1 {
      font-size: 16px;
      margin: 0 0 2px;
    }

    .subtitle {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 8px;
    }

    /* Profile bar */
    .profile-bar {
      margin-bottom: 8px;
      border: 1px solid #1f2937;
      border-radius: 8px;
      padding: 6px;
      background: #020617;
    }

    .profile-label {
      font-size: 11px;
      color: #9ca3af;
      margin-bottom: 3px;
    }

    .profile-row {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .profile-name-container {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
}

.profile-name {
  font-size: 13px;
  padding: 4px 6px;
  border-radius: 6px;
  border: 1px solid transparent;
  background: #111827;
  cursor: text;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.profile-name:hover {
  border-color: #374151;
}

.profile-name-input {
  display: none;
  width: 100%;
  font-size: 13px;
  padding: 4px 6px;
  border-radius: 6px;
  border: 1px solid #4b5563;
  background: #0f172a;
  color: #e5e7eb;
}
.profile-dropdown {
  margin-top: 6px;
  width: 100%;
  border-radius: 6px;
  background: #020617;
  border: 1px solid #1f2937;
  color: #e5e7eb;
  font-size: 12px;
  padding: 4px;
}


    #profileSelect {
      flex: 1;
      border-radius: 6px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      padding: 4px 6px;
    }

    .icon-btn {
      border-radius: 999px;
      border: 1px solid #4b5563;
      background: #111827;
      color: #e5e7eb;
      width: 26px;
      height: 26px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      padding: 0;
      transition: background 0.15s, transform 0.05s;
    }

    .icon-btn:hover {
      background: #1f2937;
    }

    .icon-btn:active {
      transform: translateY(1px);
    }

    .icon-btn.danger {
      border-color: #7f1d1d;
      background: #7f1d1d;
    }

    .icon-btn.danger:hover {
      background: #b91c1c;
    }

    /* Layout */
    .layout {
      display: grid;
      grid-template-columns: 140px minmax(0, 1fr);
      gap: 8px;
      align-items: start;
    }

    /* Sidebar (groups) */
    .sidebar {
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 8px;
      padding: 6px;
      box-sizing: border-box;
    }

    .groups-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
      font-size: 11px;
      gap: 20px;
      color: #9ca3af;
    }

    #groupList {
      list-style: none;
      margin: 0;
      padding: 0;
      max-height: 230px;
      overflow-y: auto;
    }

    .group-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 6px;
      margin-bottom: 3px;
      border-radius: 6px;
      font-size: 12px;
      cursor: pointer;
      background: transparent;
      transition: background 0.12s, transform 0.05s;
    }

    .group-item:hover {
      background: #020617;
    }

    .group-item.active {
      background: #111827;
      border: 1px solid #1f2937;
    }

    .group-name {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .group-actions {
      display: flex;
      gap: 20px;
      margin-left: 4px;
    }

    .mini-btn {
      border: none;
      padding: 2px 4px;
      border-radius: 999px;
      font-size: 10px;
      background: #1e293b;
      color: #e5e7eb;
      cursor: pointer;
    }

    .mini-btn:hover {
      background: #374151;
    }

    .mini-btn.danger {
      background: #7f1d1d;
    }

    .mini-btn.danger:hover {
      background: #b91c1c;
    }

    /* Editor */
    .editor {
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2937;
      padding: 8px;
      box-sizing: border-box;
    }

    label {
      font-size: 11px;
      display: block;
      margin-bottom: 3px;
    }

    input[type="text"] {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      padding: 4px 6px;
      margin-bottom: 6px;
      box-sizing: border-box;
    }

    textarea {
      width: 100%;
      min-height: 80px;
      resize: vertical;
      border-radius: 6px;
      padding: 6px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      box-sizing: border-box;
    }

    select {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      padding: 4px 6px;
      box-sizing: border-box;
      margin-bottom: 6px;
    }

    .hint {
      font-size: 10px;
      color: #6b7280;
      margin-top: 2px;
      margin-bottom: 6px;
    }

    .buttons-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
    }

    button {
      border-radius: 6px;
      border: 1px solid #4b5563;
      background: #111827;
      color: #e5e7eb;
      font-size: 12px;
      padding: 6px 8px;
      cursor: pointer;
      flex: 1;
      min-width: 0;
      transition: background 0.15s, transform 0.05s;
    }

    button.primary {
      background: #2563eb;
      border-color: #1d4ed8;
    }

    button.danger {
      background: #7f1d1d;
      border-color: #7f1d1d;
    }

    button:hover {
      background: #374151;
    }

    button.primary:hover {
      background: #1d4ed8;
    }

    button.danger:hover {
      background: #b91c1c;
    }

    button:active {
      transform: translateY(1px);
    }

    .status {
      margin-top: 6px;
      font-size: 11px;
      min-height: 14px;
      color: #9ca3af;
    }

    .status.ok {
      color: #4ade80;
    }

    .status.error {
      color: #f97373;
    }
  </style>
</head>

<body>
  <h1>tabbage</h1>
  <div class="subtitle">
    Use profiles (Work, Deep Work, etc.) each with groups like Social, Reading, Mail.
  </div>

  <!-- Profile selector -->
  <div class="profile-bar">
    <div class="profile-label">Profile</div>
    <div class="profile-row">
      <div class="profile-name-container">
        <span id="profileNameDisplay" class="profile-name"></span>
        <input id="profileNameInput" class="profile-name-input" type="text" />
      </div>
      <button id="addProfile" class="icon-btn" title="Add profile">ï¼‹</button>
      <button id="deleteProfile" class="icon-btn danger" title="Delete profile">ðŸ—‘</button>
    </div>

    <select id="profileSelect" class="profile-dropdown"></select>

  </div>

  <div class="layout">
    <!-- Sidebar: group list -->
    <aside class="sidebar">
      <div class="groups-header">
        <span>Groups</span>
        <button id="addGroup" class="icon-btn" style="width: 22px; height: 22px; font-size: 14px;"
          title="Add group">ï¼‹</button>
      </div>
      <ul id="groupList"></ul>
    </aside>

    <!-- Editor: selected group -->
    <section class="editor">
      <label for="groupName">Group name</label>
      <input id="groupName" type="text" placeholder="e.g. Social, Reading, Mail" />

      <label for="groupLayout">Layout</label>
      <select id="groupLayout">
        <option value="vertical">Vertical columns</option>
        <option value="horizontal">Horizontal rows</option>
        <option value="grid2x2">2Ã—2 grid (2 columns)</option>
      </select>


      <label for="groupUrls">URLs (one per line)</label>
      <textarea id="groupUrls" placeholder="https://x.com&#10;https://reddit.com"></textarea>

      <div class="hint">
        You can skip <code>https://</code>; it will be added.
        <br>Examples:
        <br><em>Social</em> = x.com, reddit.com
        <br><em>Reading</em> = news.ycombinator.com, substack.com
      </div>

      <div class="buttons-row">
        <button id="saveGroup">Save group</button>
        <button id="openGroup" class="primary">Open (layout)</button>
        <button id="closeGroup" class="danger">Close group windows</button>
      </div>

      <div id="status" class="status"></div>
    </section>
  </div>

  <script src="popup.js"></script>
</body>

</html>